# -*- encoding:utf-8 -*-

import requests

url = 'https://nqi.gmcc.net:20443/pro-adhoc/adhocquery/getTable'

# 建立一个session
# 得到用户在网页上的信息
# session = requests.Session()
# session.get(url)
# cookie = session. cookies
# 构造请求头
headers = {
    'Accept': 'application/json, text/javascript, */*; q=0.01',
    'X-Requested-With': 'XMLHttpRequest',
    'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',
    # 'Cookie': 'JSESSIONID=812AC601A192BED2D95685C2DDF50DC9; CASTGC=TGT-31505-3xlCGATAKwKNuDBQL4c6iPQQvi4coKd2nBAKSa4QDTP76YOmwZ-cas',
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36',
    'Referer': 'https://nqi.gmcc.net:20443/pro-adhoc/adhocquery?datesub=2019-10-12%20~%202019-10-12&datecategory=1&hours=&minutes=&enodeb_id=&cgi=&city=%E8%8C%82%E5%90%8D&grid=&dimension=0&type=type&value=4&searchtype=&eci='
}
data = {
    'draw': '1',
    'columns[0][data]': 'city',
    'columns[0][name]': '',
    'columns[0][searchable]': 'true',
    'columns[0][orderable]': 'true',
    'columns[0][search][value]': '',
    'columns[0][search][regex]': 'false',
    'columns[1][data]': 'area',
    'columns[1][name]': '',
    'columns[1][searchable]': 'true',
    'columns[1][orderable]': 'true',
    'columns[1][search][value]': '',
    'columns[1][search][regex]': 'false',
    'columns[2][data]': 'grid',
    'columns[2][name]': '',
    'columns[2][searchable]': 'true',
    'columns[2][orderable]': 'true',
    'columns[2][search][value]': '',
    'columns[2][search][regex]': 'false',
    'columns[3][data]': 'cell_name',
    'columns[3][name]': '',
    'columns[3][searchable]': 'true',
    'columns[3][orderable]': 'true',
    'columns[3][search][value]': '',
    'columns[3][search][regex]': 'false',
    'columns[4][data]': 'cgi',
    'columns[4][name]': '',
    'columns[4][searchable]': 'true',
    'columns[4][orderable]': 'true',
    'columns[4][search][value]': '',
    'columns[4][search][regex]': 'false',
    'columns[5][data]': 'scene_name',
    'columns[5][name]': '',
    'columns[5][searchable]': 'true',
    'columns[5][orderable]': 'true',
    'columns[5][search][value]': '',
    'columns[5][search][regex]': 'false',
    'columns[6][data]': 'scene_type',
    'columns[6][name]': '',
    'columns[6][searchable]': 'true',
    'columns[6][orderable]': 'true',
    'columns[6][search][value]': '',
    'columns[6][search][regex]': 'false',
    'columns[7][data]': 'latitude',
    'columns[7][name]': '',
    'columns[7][searchable]': 'true',
    'columns[7][orderable]': 'true',
    'columns[7][search][value]': '',
    'columns[7][search][regex]': 'false',
    'columns[8][data]': 'longitude',
    'columns[8][name]': '',
    'columns[8][searchable]': 'true',
    'columns[8][orderable]': 'true',
    'columns[8][search][value]': '',
    'columns[8][search][regex]': 'false',
    'columns[9][data]': 'starttime',
    'columns[9][name]': '',
    'columns[9][searchable]': 'true',
    'columns[9][orderable]': 'true',
    'columns[9][search][value]': '',
    'columns[9][search][regex]': 'false',
    'columns[10][data]': 'endtime',
    'columns[10][name]': '',
    'columns[10][searchable]': 'true',
    'columns[10][orderable]': 'true',
    'columns[10][search][value]': '',
    'columns[10][search][regex]': 'false',
    'columns[11][data]': 'mro_all_rsrp_count',
    'columns[11][name]': '',
    'columns[11][searchable]': 'true',
    'columns[11][orderable]': 'true',
    'columns[11][search][value]': '',
    'columns[11][search][regex]': 'false',
    'columns[12][data]': 'mro_yd_rsrp_gt_f110',
    'columns[12][name]': '',
    'columns[12][searchable]': 'true',
    'columns[12][orderable]': 'true',
    'columns[12][search][value]': '',
    'columns[12][search][regex]': 'false',
    'columns[13][data]': 'mro_yd_rsrp_rate',
    'columns[13][name]': '',
    'columns[13][searchable]': 'true',
    'columns[13][orderable]': 'true',
    'columns[13][search][value]': '',
    'columns[13][search][regex]': 'false',
    'columns[14][data]': 'mro_overlap_rsrp_count',
    'columns[14][name]': '',
    'columns[14][searchable]': 'true',
    'columns[14][orderable]': 'true',
    'columns[14][search][value]': '',
    'columns[14][search][regex]': 'false',
    'columns[15][data]': 'mro_overlap_rsrp_rate',
    'columns[15][name]': '',
    'columns[15][searchable]': 'true',
    'columns[15][orderable]': 'true',
    'columns[15][search][value]': '',
    'columns[15][search][regex]': 'false',
    'columns[16][data]': 'mro_ydlt_rsrp_count',
    'columns[16][name]': '',
    'columns[16][searchable]': 'true',
    'columns[16][orderable]': 'true',
    'columns[16][search][value]': '',
    'columns[16][search][regex]': 'false',
    'columns[17][data]': 'mro_ydlt_rsrp_gt_f110',
    'columns[17][name]': '',
    'columns[17][searchable]': 'true',
    'columns[17][orderable]': 'true',
    'columns[17][search][value]': '',
    'columns[17][search][regex]': 'false',
    'columns[18][data]': 'mro_ydlt_rsrp_rate',
    'columns[18][name]': '',
    'columns[18][searchable]': 'true',
    'columns[18][orderable]': 'true',
    'columns[18][search][value]': '',
    'columns[18][search][regex]': 'false',
    'columns[19][data]': 'mro_yddx_rsrp_count',
    'columns[19][name]': '',
    'columns[19][searchable]': 'true',
    'columns[19][orderable]': 'true',
    'columns[19][search][value]': '',
    'columns[19][search][regex]': 'false',
    'columns[20][data]': 'mro_yddx_rsrp_gt_f110',
    'columns[20][name]': '',
    'columns[20][searchable]': 'true',
    'columns[20][orderable]': 'true',
    'columns[20][search][value]': '',
    'columns[20][search][regex]': 'false',
    'columns[21][data]': 'mro_yddx_rsrp_rate',
    'columns[21][name]': '',
    'columns[21][searchable]': 'true',
    'columns[21][orderable]': 'true',
    'columns[21][search][value]': '',
    'columns[21][search][regex]': 'false',
    'columns[22][data]': 'mro_lt_rsrp_count',
    'columns[22][name]': '',
    'columns[22][searchable]': 'true',
    'columns[22][orderable]': 'true',
    'columns[22][search][value]': '',
    'columns[22][search][regex]': 'false',
    'columns[23][data]': 'mro_lt_rsrp_gt_f113',
    'columns[23][name]': '',
    'columns[23][searchable]': 'true',
    'columns[23][orderable]': 'true',
    'columns[23][search][value]': '',
    'columns[23][search][regex]': 'false',
    'columns[24][data]': 'mro_lt_rsrp_rate',
    'columns[24][name]': '',
    'columns[24][searchable]': 'true',
    'columns[24][orderable]': 'true',
    'columns[24][search][value]': '',
    'columns[24][search][regex]': 'false',
    'columns[25][data]': 'mro_dx_rsrp_count',
    'columns[25][name]': '',
    'columns[25][searchable]': 'true',
    'columns[25][orderable]': 'true',
    'columns[25][search][value]': '',
    'columns[25][search][regex]': 'false',
    'columns[26][data]': 'mro_dx_rsrp_gt_f113',
    'columns[26][name]': '',
    'columns[26][searchable]': 'true',
    'columns[26][orderable]': 'true',
    'columns[26][search][value]': '',
    'columns[26][search][regex]': 'false',
    'columns[27][data]': 'mro_dx_rsrp_rate',
    'columns[27][name]': '',
    'columns[27][searchable]': 'true',
    'columns[27][orderable]': 'true',
    'columns[27][search][value]': '',
    'columns[27][search][regex]': 'false',
    'columns[28][data]': 'count',
    'columns[28][name]': '',
    'columns[28][searchable]': 'true',
    'columns[28][orderable]': 'true',
    'columns[28][search][value]': '',
    'columns[28][search][regex]': 'false',
    'order[0][column]': '0',
    'order[0][dir]': 'desc',
    'start': '0',
    'length': '200',
    'total': '0',
    'search[value]': '',
    'search[regex]': 'false',
    'result': '{"result":[{"feildtype":"公共信息","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"charactervarying","columntype":2,"feildName":"所属地市","feild":"city","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"公共信息","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"charactervarying","columntype":2,"feildName":"所属区县","feild":"area","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"公共信息","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"charactervarying","columntype":2,"feildName":"网格","feild":"grid","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"公共信息","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"charactervarying","columntype":2,"feildName":"小区名称","feild":"cell_name","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"公共信息","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"charactervarying","columntype":2,"feildName":"CGI","feild":"cgi","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"公共信息","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"charactervarying","columntype":2,"feildName":"场景","feild":"scene_name","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"公共信息","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"charactervarying","columntype":2,"feildName":"覆盖类型","feild":"scene_type","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"公共信息","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"decimal","columntype":2,"feildName":"纬度","feild":"latitude","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"公共信息","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"decimal","columntype":2,"feildName":"经度","feild":"longitude","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"公共信息","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"timestamp","columntype":2,"feildName":"开始时间","feild":"starttime","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"公共信息","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"timestamp","columntype":2,"feildName":"结束时间","feild":"endtime","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"bigint","columntype":1,"feildName":"MRO总采样点数","feild":"mro_all_rsrp_count","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"bigint","columntype":1,"feildName":"MRO移动大于等于负110dBm的采样点数","feild":"mro_yd_rsrp_gt_f110","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"decimal","columntype":1,"feildName":"MRO移动大于等于负110dBm的覆盖率(%)","feild":"mro_yd_rsrp_rate","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"bigint","columntype":1,"feildName":"MRO移动同频重叠覆盖采样点","feild":"mro_overlap_rsrp_count","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"decimal","columntype":1,"feildName":"MRO移动同频重叠覆盖比例(%)","feild":"mro_overlap_rsrp_rate","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"bigint","columntype":1,"feildName":"MRO移动联通均有采样的移动总采样点","feild":"mro_ydlt_rsrp_count","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"bigint","columntype":1,"feildName":"MRO移动联通均有采样的移动强于-110采样点","feild":"mro_ydlt_rsrp_gt_f110","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"decimal","columntype":1,"feildName":"MRO移动联通均有采样的移动强于-110覆盖率(%)","feild":"mro_ydlt_rsrp_rate","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"bigint","columntype":1,"feildName":"MRO移动电信均有采样的移动总采样点","feild":"mro_yddx_rsrp_count","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"bigint","columntype":1,"feildName":"MRO移动电信均有采样的移动强于-110采样点","feild":"mro_yddx_rsrp_gt_f110","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"decimal","columntype":1,"feildName":"MRO移动电信均有采样的移动强于-110覆盖率(%)","feild":"mro_yddx_rsrp_rate","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"bigint","columntype":1,"feildName":"MRO移动联通均有采样的联通总采样点","feild":"mro_lt_rsrp_count","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"bigint","columntype":1,"feildName":"MRO移动联通均有采样的联通强于-113采样点","feild":"mro_lt_rsrp_gt_f113","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"decimal","columntype":1,"feildName":"MRO移动联通均有采样的联通强于-113覆盖率(%)","feild":"mro_lt_rsrp_rate","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"bigint","columntype":1,"feildName":"MRO移动电信均有采样的电信总采样点","feild":"mro_dx_rsrp_count","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"bigint","columntype":1,"feildName":"MRO移动电信均有采样的电信强于-113采样点","feild":"mro_dx_rsrp_gt_f113","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"decimal","columntype":1,"feildName":"MRO移动电信均有采样的电信强于-113覆盖率(%)","feild":"mro_dx_rsrp_rate","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"},{"feildtype":"参考信号接收功率(含竞对)统计-实时","table":"sumdbv2.v_sum_mro_rsrp_all_15","tableName":"参考信号接收功率(含竞对)统计-实时","datatype":"integer","columntype":1,"feildName":"汇总文件数","feild":"count","poly":"无","anyWay":"无","chart":"无","chartpoly":"无"}],"tableParams":{"supporteddimension":"0","supportedtimedimension":"1"},"columnname":""}',
    'where': '[{"datatype":"timestamp","feild":"starttime","feildName":"","symbol":">=","val":"2019-10-1100:00:00","whereCon":"and","query":true},{"datatype":"timestamp","feild":"starttime","feildName":"","symbol":"<","val":"2019-10-1123:59:59","whereCon":"and","query":true},{"datatype":"character","feild":"city","feildName":"","symbol":"in","val":"茂名","whereCon":"and","query":true}]',
    'indexcount': '1',
}

response = requests.post(url, headers=headers, data=data).text
print(response)
# response = requests.post(url) .text
# print(response)
